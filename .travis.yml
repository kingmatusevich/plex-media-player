os: osx
language: objective_c
before_install:
 - brew update
 - brew install ninja
 - brew install mpv --with-shared --HEAD
 - brew outdated cmake || brew upgrade cmake
 - mkdir build ; cd build
 - cmake -GNinja -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=output ..
install:
 - ninja
 - ninja install
 - tar -zcvf PMP.tar.gz "output/Plex Media Player.app"
deploy:
  provider: releases
  api_key: "GITHUB OAUTH TOKEN"
 file: "$TRAVIS_BUILD_DIR/build/output/PMP.tar.gz"
  skip_cleanup: true
  on:
    tags: true
